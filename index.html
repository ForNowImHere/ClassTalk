<!DOCTYPE html>
<html>
<head>
    <title>Create Room</title>
</head>
<body>
    <h1>Create a Video Chat Room</h1>
    <input type="text" id="username" placeholder="Enter your name" />
    <input type="file" id="profilePic" accept="image/*" />
    <button onclick="createRoom()">Create Room</button>

    <script>
        function createRoom() {
            const username = document.getElementById('username').value;
            const profilePicInput = document.getElementById('profilePic');
            const reader = new FileReader();

            reader.onload = () => {
                const profilePic = reader.result;
                const roomId = Math.random().toString(36).substring(2, 10);
                localStorage.setItem('user', JSON.stringify({ name: username, profilePic }));
                window.location.href = `/room/${roomId}`;
            };

            if (profilePicInput.files[0]) {
                reader.readAsDataURL(profilePicInput.files[0]);
            } else {
                const profilePic = '';
                const roomId = Math.random().toString(36).substring(2, 10);
                localStorage.setItem('user', JSON.stringify({ name: username, profilePic }));
                window.location.href = `/room/${roomId}`;
            }
        }
    </script>
</body>
</html>
